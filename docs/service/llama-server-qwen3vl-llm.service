# /etc/systemd/system/llama-server-qwen3vl-llm.service
[Unit]
Description=Llama.cpp Server - Qwen3-VL 8B (LLM Mode, ctx=8K p=2)
After=network.target
Wants=network-online.target

[Service]
Type=simple
User=kca
WorkingDirectory=/models/llama.cpp
Environment="CUDA_VISIBLE_DEVICES=0"
ExecStart=/models/llama.cpp/build/bin/llama-server \
  -m /models/qwen3-vl-gguf/Qwen3VL-8B-Instruct-Q4_K_M.gguf \
  --mmproj /models/qwen3-vl-gguf/mmproj-Qwen3VL-8B-Instruct-Q8_0.gguf \
  --host 0.0.0.0 \
  --port 8084 \
  --ctx-size 8192 \
  --parallel 2 \
  --jinja \
  -fa 1 \
  -ngl 99 \
  --temp 0.7 \
  --top-p 0.9 \
  --repeat-penalty 1.1 \
  --n-predict 4096 \
  --threads 4 \
  --batch-size 1024 \
  --ubatch-size 512
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal
SyslogIdentifier=llama-server-qwen3vl-llm
LimitNOFILE=65535

[Install]
WantedBy=multi-user.target
